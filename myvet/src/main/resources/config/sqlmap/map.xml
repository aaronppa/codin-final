<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
	"http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="kr.co.codin.repository.mapper.MapMapper">

	<resultMap type="HosBasic" id="HosBasicMap">
		
		<result column="title" property="title"/>
		<result column="roadAddress" property="roadAddress"/>
		<result column="address" property="address"/>
		<result column="mapx" property="mapx"/>
		<result column="mapy" property="mapy"/>		
		<result column="telephone" property="telephone"/>
		<result column="hos_register" property="hosRegister"/>
		<result column="hos_search_cnt" property="hosSearchCnt"/>
	</resultMap>
	
	<insert id="insertMap" parameterType="HosBasic">
		insert into 
			hos_basic(title,address,roadAddress,mapx,mapy,telephone)
			values(#{title},#{address},#{roadAddress},#{mapx},#{mapy},#{telephone})
				
	</insert>
	
	<update id="updateSearchCnt" parameterType="HosBasic">
	 update hos_basic
	 	set hos_search_cnt=hos_search_cnt+1
	 	where title = #{title} and address= #{address} and roadAddress=#{roadAddress} and mapx = #{mapx} and mapy=#{mapy} 
	</update>
	
	<select id="selectRegiMap" parameterType="HosBasic" resultType="string">
		select hos_register 
			from  hos_basic
			where title=#{title} and 
					address=#{address} and 
				  roadAddress=#{roadAddress} and 
				  mapx=#{mapx} and 
				  mapy=#{mapy} and
				  telephone = #{telephone}			
	</select>
	
	<select id="selectMap" parameterType="HosBasic" resultMap="HosBasicMap">
		select *
			from hos_basic
			where  title=#{title} and mapx=#{mapx} and mapy = #{mapy} and address = #{address}
	</select>
	
	
	
	<select id="unregiCheck" parameterType="HosBasic" resultType="string">
		select *
			from hos_basic
			where hos_register='Y' and title=#{title} and address=#{address}  and mapx=#{mapx} and mapy=#{mapy}
	</select>
	
	
	
</mapper>