<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
	"http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="kr.co.codin.repository.mapper.QnaMapper">
	<resultMap type="Qna" id="QnaMap">
		<result column="qna_no" property="qnaNo"/>
		<result column="board_code" property="boardCode"/>
		<result column="title" property="title"/>
		<result column="writer_no" property="writerNo"/>
		<result column="content" property="content"/>
		<result column="reg_date" property="regDate"/>
		<result column="view_cnt" property="viewCnt"/>
		<result column="category_code" property="categoryCode"/>
		<result column="answered" property="answered"/>

	</resultMap>
	<resultMap type="QnaComment" id="QnaCommentMap">
		<result column="comment_no" property="commentNo"/>
		<result column="qna_no" property="qnaNo"/>
		<result column="commenter_no" property="commenterNo"/>
		<result column="content" property="content"/>
		<result column="reg_date" property="regDate"/>
		<result column="pick" property="pick"/>


	</resultMap>
	<resultMap type="QnaRecommend" id="QnaRecommendMap">
		<result column="no" property="no"/>
		<result column="member_no" property="memberNo"/>
		<result column="comment_no" property="qndNo"/>
		<result column="recommend" property="recommend"/>
	

	</resultMap>
	<resultMap type="QnaCommentRecommend" id="QnaCommentRecommendMap">
		<result column="no" property="no"/>
		<result column="member_no" property="memberNo"/>
		<result column="comment_no" property="commentNo"/>
		<result column="recommend" property="recommend"/>
	

	</resultMap>
	
	
	
	<select id="qnaList" parameterType="Qna" resultMap="QnaMap">
		select *
		from qna
		order by qna_no desc
	
	</select>
	
	<insert id="InsertQna" parameterType="Qna">
		insert into qna(title,board_code,writer_no,content,category_code) values(#{title},20,#{writerNo},#{content},#{categoryCode})
	</insert>
	
	<select id="selectQnaByNo" parameterType="Qna" resultMap="QnaMap">
		select *
		from qna
		where qna_no = #{qnaNo}
	</select>
	
	<update id="updateViewCnt" parameterType="Qna">
		update qna
		set view_cnt=#{viewCnt}+1
		where qna_no = #{qnaNo}
	</update>
	
	<update id="updateQna" parameterType="Qna">
		update qna		
		set title=#{title} , content= #{content} , category_code = #{categoryCode}
		where qna_no = #{qnaNo} and writer_no=#{writerNo} 
	</update>
	
	<delete id="deleteQna" parameterType="Qna">
	delete from qna
	where qna_no =#{qnaNo} and writer_no = #{writerNo}
	</delete>
	
	<insert id="insertComment" parameterType="QnaComment">
		insert into qna_comment(qna_no,commenter_no,content) values(#{qnaNo},#{commenterNo},#{content})
	</insert>
	
	<select id="selectCombyNo" parameterType="QnaComment" resultMap="QnaCommentMap">
		select *
		from qna_comment
		where qna_no = #{qnaNo}
	</select>
 </mapper>
